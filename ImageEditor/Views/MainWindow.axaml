<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:ImageEditor.ViewModels"
        x:Class="ImageEditor.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="{Binding Title, Mode=TwoWay}"
        Width="500" Height="800"
        Icon="/Assets/avalonia-logo.ico">


    <Border Padding="10">
        <StackPanel>     

                        <Grid RowDefinitions="Auto Auto Auto Auto Auto Auto" >

                                <TextBlock Grid.Row="0" Text="{Binding Image.SizeText}" HorizontalAlignment="Center" VerticalAlignment="Center"/> 

                                <Grid Grid.Row="1" Height="{Binding GridHeight}" Width="{Binding GridWidth}">
                                        <Border
                                                BorderBrush="Black"
                                                BorderThickness="2"
                                                Padding="0"
                                                >
                                        <ItemsControl ItemsSource="{Binding Image.Pixels, Mode=TwoWay}">

                                                <ItemsControl.ItemsPanel>
                                                        <ItemsPanelTemplate>
                                                        <UniformGrid Rows="{Binding Image.Height}" Columns="{Binding Image.Width}" />
                                                        </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>

                                                <ItemsControl.ItemTemplate>
                                                        <DataTemplate x:DataType="vm:PixelViewModel">
                                                        <Button Background="{Binding Color}"
                                                                Command="{Binding ToggleCommand}"
                                                                Height="40"
                                                                Width="40"
                                                                CornerRadius="0"
                                                                BorderThickness="0"/>
                                                        </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                        </Border>
                                </Grid>
                                <TextBox Grid.Row="2" x:Name="FileName" Watermark="Enter file name..." Text="{Binding Image.FileNameText}" Margin="10" Width="300"/>

                                <Grid ColumnDefinitions="Auto Auto" Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <Button Grid.Column="0" Margin="10" Click="VFlipHandler">Vertical Flip</Button>
                                        <Button Grid.Column="1" Margin="10" Click="HFlipHandler">Horizontal Flip</Button> 
                                </Grid>

                                <Grid ColumnDefinitions="Auto Auto" Grid.Row="4" HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <Button Grid.Column="0" Margin="10" Click="LoadHandler">load</Button>
                                        <Button Grid.Column="1" Margin="10" Click="SaveHandler">save</Button> 
                                </Grid>
                                
                                <TextBlock Grid.Row = "5" Margin="0 10" x:Name="message">Click the 'load' button for the image...</TextBlock>
                        </Grid>
                
        </StackPanel>    
    </Border>
</Window>
